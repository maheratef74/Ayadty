@model Ayadty.Models.RegisterViewModel

<div class="container mt-5" dir="rtl">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-lg">
                <div class="card-header bg-primary text-white text-center">
                    <h2>عيادتي - انشاء حساب</h2>
                </div>
                <div class="card-body">
                    <!-- Corrected to <form> -->
                    <form asp-controller="auth" asp-action="Register" method="post">
                        <div class="mb-3">
                            <label asp-for="Name" class="form-label">الاسم</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="bi bi-person"></i></span>
                                <input asp-for="Name" class="form-control" placeholder="أدخل الاسم" />
                            </div>
                            <span asp-validation-for="Name" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="PhoneNumber" class="form-label">رقم الهاتف</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="bi bi-telephone"></i></span>
                                <input asp-for="PhoneNumber" class="form-control" placeholder="أدخل رقم الهاتف" />
                            </div>
                            <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="Email" class="form-label">البريد الإلكتروني</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                                <input asp-for="Email" class="form-control" placeholder="أدخل البريد الإلكتروني" />
                            </div>
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>

                        <div class="mb-3">
                            <label asp-for="UserType" class="form-label">نوع المستخدم</label>
                            <select asp-for="UserType" class="form-select" id="userTypeSelect">
                                <option value="">اختر نوع المستخدم</option>
                                <option value="Doctor">طبيب</option>
                                <option value="Patient">مريض</option>
                            </select>
                            <span asp-validation-for="UserType" class="text-danger"></span>
                        </div>

                        <!-- Doctor-specific fields -->
                        <div id="doctorFields" style="display: none;">
                            <div class="mb-3">
                                <label asp-for="Specialization" class="form-label">التخصص</label>
                                <select asp-for="Specialization" class="form-select">
                                    <option value="">اختر التخصص</option>
                                    @foreach (var specialization in Enum.GetValues(typeof(Ayadty.Models.Enums.Specialization)))
                                    {
                                    <option value="@specialization">@specialization</option>
                                    }
                                </select>
                                <span asp-validation-for="Specialization" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="YearsOfExperience" class="form-label">سنوات الخبرة</label>
                                <input asp-for="YearsOfExperience" class="form-control" placeholder="أدخل سنوات الخبرة" />
                                <span asp-validation-for="YearsOfExperience" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Price" class="form-label">السعر</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
                                    <input asp-for="Price" class="form-control" placeholder="أدخل سعر الحجز" />
                                </div>
                                <span asp-validation-for="Price" class="text-danger"></span>
                            </div>
                        </div>

                        <!-- Patient-specific fields -->
                        <div id="patientFields" style="display: none;">
                            <div class="mb-3">
                                <label asp-for="DateOfBirth" class="form-label">تاريخ الميلاد</label>
                                <input asp-for="DateOfBirth" type="date" class="form-control" />
                                <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Gender" class="form-label">الجنس</label>
                                <select asp-for="Gender" class="form-select">
                                    <option value="">اختر الجنس</option>
                                    <option value="Male">ذكر</option>
                                    <option value="Female">انثي</option>
                                </select>
                                <span asp-validation-for="Gender" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Address" class="form-label">العنوان</label>
                                <input asp-for="Address" class="form-control" placeholder="أدخل العنوان" />
                                <span asp-validation-for="Address" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">تسجيل</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    document.getElementById('userTypeSelect').addEventListener('change', function () {
        var selectedValue = this.value;
        if (selectedValue === 'Doctor') {
            document.getElementById('doctorFields').style.display = 'block';
            document.getElementById('patientFields').style.display = 'none';
        } else if (selectedValue === 'Patient') {
            document.getElementById('patientFields').style.display = 'block';
            document.getElementById('doctorFields').style.display = 'none';
        } else {
            document.getElementById('doctorFields').style.display = 'none';
            document.getElementById('patientFields').style.display = 'none';
        }
    });
</script>
}
